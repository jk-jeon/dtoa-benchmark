<html>
<head>
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://www.google.com/jsapi?autoload={'modules':[{'name':'visualization','version':'1','packages':['controls', 'charteditor']}]}"></script>
<script src="https://web.archive.org/web/20160324220311/http://jquery-csv.googlecode.com/git/src/jquery.csv.js"></script>
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script>
$(function() {
	google.load("visualization", "1", {packages:["corechart"]});

    var csv = $('#textInput').val();
    var data = $.csv.toArrays(csv, {
        onParseValue: $.csv.hooks.castToScalar
    });

    // Convert data for bar chart (summing all digits)
    var timeData = {};	// type -> table
    var funcRowMap;
    var maxDigit = 0;

    for (var i = 1; i < data.length; i++) {
    	var type = data[i][0];
   		var func = data[i][1];
      var digit = data[i][2];
   		var time = data[i][3];
   		if (timeData[type] == null) {
   			timeData[type] = [["Function", "Time (ns)"/*, { role: "style" }*/]];
        if (digit != 0)
   			  funcRowMap = {};
   		}

   		var table = timeData[type];
   		
      if (digit != 0) {
     		if (funcRowMap[func] == null)
     			funcRowMap[func] = table.push([func, 0]) - 1;
     		
     		table[funcRowMap[func]][1] += time;
      }
      else 
        table.push([func, time]);

      maxDigit = Math.max(maxDigit, digit);
    }

    // Compute average
    for (var type in timeData) {
      var table = timeData[type];
      for (var i = 1; i < table.length; i++)
        table[i][1] /= maxDigit;
    }

    // Convert data for drawing line chart per random digit
    var timeDigitData = {}; // type -> table
    var funcColumnMap;

    for (var i = 1; i < data.length; i++) {
    	var type = data[i][0];
   		var func = data[i][1];
		  var digit = data[i][2];
   		var time = data[i][3];

      if (digit == 0)
        continue;

   		if (timeDigitData[type] == null) {
   			timeDigitData[type] = [["Digit"]];
   			funcColumnMap = {};
   		}

   		var table = timeDigitData[type];

   		if (funcColumnMap[func] == null)
   			funcColumnMap[func] = table[0].push(func) - 1;

   		var row;
   		for (row = 1; row < table.length; row++)
   			if (table[row][0] == digit)
   				break;

    	if (row == table.length)
    		table.push([digit]);

		table[row][funcColumnMap[func]] = time;
	}

	for (var type in timeData) {
		$("#main").append(
      $("<a>", {name: type}),
      $("<h2>", {style: "padding-top: 70px; margin-top: -70px;"}).append(type)
    );

    $("#section").append($("<li>").append($("<a>", {href: "#" + type}).append(type)));

		drawTable(type, timeData[type]);
		drawBarChart(type, timeData[type]);
    if (timeDigitData[type] != null)
		  drawDigitChart(type, timeDigitData[type]);
	}

	$(".chart").each(function() {
		var chart = $(this);
		var d = $("#downloadDD").clone().css("display", "");
		$('li a', d).each(function() {
	        $(this).click(function() {
	            var svg = chart[0].getElementsByTagName('svg')[0].parentNode.innerHTML;
	            svg=sanitize(svg);
	            $('#imageFilename').val($("#title").html() + "_" + chart.data("filename"));
	            $('#imageGetFormTYPE').val($(this).attr('dltype'));
	            $('#imageGetFormSVG').val(svg);
	            $('#imageGetForm').submit();
	        });
	    });		
		$(this).after(d);
	});

  // Add configurations
  var thisConfig = "unknown_win64_vc2019";
  var configurations = ["corei7920@2.67_cygwin32_gcc4.8","corei7920@2.67_cygwin64_gcc4.8","corei7920@2.67_win32_vc2013","corei7920@2.67_win64_vc2013","unknown_mac32_clang7.0","unknown_mac64_clang7.0","unknown_win64_vc2019"];

  for (var i in configurations) {
    var c = configurations[i];
    $("#configuration").append($("<li>", {class : (c == thisConfig ? "active" : "")}).append($("<a>", {href: c + ".html"}).append(c)));
  }
});

function drawTable(type, timeData) {
	var data = google.visualization.arrayToDataTable(timeData);
    data.addColumn('number', 'Speedup');
    data.sort([{ column: 1, desc: true }]);
    var formatter1 = new google.visualization.NumberFormat({ fractionDigits: 3 });
    formatter1.format(data, 1);

	var div = document.createElement("div");
	div.className = "tablechart";
	$("#main").append(div);
    var table = new google.visualization.Table(div);
    redrawTable(0);
    table.setSelection([{ row: 0, column: null}]);

    function redrawTable(selectedRow) {
        // Compute relative time using the first row as basis
        var basis = data.getValue(selectedRow, 1);
        for (var rowIndex = 0; rowIndex < data.getNumberOfRows(); rowIndex++)
            data.setValue(rowIndex, 2, basis / data.getValue(rowIndex, 1));

        var formatter = new google.visualization.NumberFormat({suffix: 'x'});
        formatter.format(data, 2); // Apply formatter to second column

        table.draw(data);
    }

    google.visualization.events.addListener(table, 'select',
    function() {
        var selection = table.getSelection();
        if (selection.length > 0) {
            var item = selection[0];
            if (item.row != null)
                redrawTable(item.row);
        }
    });

}

function drawBarChart(type, timeData) {
    var defaultColors = ["#3366cc","#dc3912","#ff9900","#109618","#990099","#0099c6","#dd4477","#66aa00","#b82e2e","#316395","#994499","#22aa99","#aaaa11","#6633cc","#e67300","#8b0707","#651067","#329262","#5574a6","#3b3eac","#b77322","#16d620","#b91383","#f4359e","#9c5935","#a9c413","#2a778d","#668d1c","#bea413","#0c5922","#743411"];

	var data = google.visualization.arrayToDataTable(timeData);
	data.addColumn({ type: "string", role: "style" })
	for (var rowIndex = 0; rowIndex < data.getNumberOfRows(); rowIndex++)
		data.setValue(rowIndex, 2, defaultColors[rowIndex]);

    data.sort([{ column: 1, desc: true }]);
	var options = { 
		title: type,
		chartArea: {'width': '70%', 'height': '70%'},
		width: 800,
		height: 300,
		legend: { position: "none" },
		hAxis: { title: "Time (ns)" }
	};
	var div = document.createElement("div");
	div.className = "chart";
	$(div).data("filename", type + "_time");
	$("#main").append(div);
	var chart = new google.visualization.BarChart(div);

	chart.draw(data, options);
}

function drawDigitChart(type, timeDigitData) {
	var data = google.visualization.arrayToDataTable(timeDigitData);

	var options = { 
		title: type,
		chartArea: {'width': '70%', 'height': '80%'},
		hAxis: {
			title: "Digit",
			gridlines: { count: timeDigitData.length - 1 },
			maxAlternation: 1,
			minTextSpacing: 0
		},
		vAxis: {
			title: "Time (ns) in log scale",
			logScale: true,
			minorGridlines: { count: 10 },
      baseline: 0
		},
		width: 800,
		height: 600
	};
	var div = document.createElement("div");
	div.className = "chart";
	$(div).data("filename", type + "_timedigit");
	$("#main").append(div);
	var chart = new google.visualization.LineChart(div);

	chart.draw(data, options);
}

// http://jsfiddle.net/P6XXM/
function sanitize(svg) {
    svg = svg
        .replace(/\<svg/,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1"')
        .replace(/zIndex="[^"]+"/g, '')
        .replace(/isShadow="[^"]+"/g, '')
        .replace(/symbolName="[^"]+"/g, '')
        .replace(/jQuery[0-9]+="[^"]+"/g, '')
        .replace(/isTracker="[^"]+"/g, '')
        .replace(/url\([^#]+#/g, 'url(#')
        .replace('<svg xmlns:xlink="http://www.w3.org/1999/xlink" ', '<svg ')
        .replace(/ href=/g, ' xlink:href=')
    /*.replace(/preserveAspectRatio="none">/g, 'preserveAspectRatio="none"/>')*/
    /* This fails in IE < 8
    .replace(/([0-9]+)\.([0-9]+)/g, function(s1, s2, s3) { // round off to save weight
    return s2 +'.'+ s3[0];
    })*/

    // IE specific
        .replace(/id=([^" >]+)/g, 'id="$1"')
        .replace(/class=([^" ]+)/g, 'class="$1"')
        .replace(/ transform /g, ' ')
        .replace(/:(path|rect)/g, '$1')
        .replace(/<img ([^>]*)>/gi, '<image $1 />')
        .replace(/<\/image>/g, '') // remove closing tags for images as they'll never have any content
        .replace(/<image ([^>]*)([^\/])>/gi, '<image $1$2 />') // closes image tags for firefox
        .replace(/width=(\d+)/g, 'width="$1"')
        .replace(/height=(\d+)/g, 'height="$1"')
        .replace(/hc-svg-href="/g, 'xlink:href="')
        .replace(/style="([^"]+)"/g, function (s) {
            return s.toLowerCase();
        });

    // IE9 beta bugs with innerHTML. Test again with final IE9.
    svg = svg.replace(/(url\(#highcharts-[0-9]+)&quot;/g, '$1')
        .replace(/&quot;/g, "'");
    if (svg.match(/ xmlns="/g).length == 2) {
        svg = svg.replace(/xmlns="[^"]+"/, '');
    }

    return svg;
}
</script>
<style type="text/css">
@media (min-width: 800px) {
  .container {
    max-width: 800px;
  }
}
textarea {
	font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace;
}
.tablechart {
	width: 700px;
	margin: auto;
	padding-top: 20px;
	padding-bottom: 20px;
}
.chart {
	padding-top: 20px;
	padding-bottom: 20px;
}
body { padding-top: 70px; }
</style>
</head>
<body>
<div class="container">
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://github.com/miloyip/dtoa-benchmark"><span class="glyphicon glyphicon-home"></span> dtoa-benchmark</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Configuration <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu" id="configuration">
          </ul>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Section <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu" id="section">
          </ul>
        </li>
      </ul>
      <p class="navbar-text navbar-right">Developed by <a href="https://github.com/miloyip" class="navbar-link">Milo Yip</a></p>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>
<div class="page-header">
<h1 id="title">unknown_win64_vc2019</h1>
</div>
<div id="main"></div>
<h2>Source CSV</h2>
<textarea id="textInput" class="form-control" rows="5" readonly>
Type,Function,Digit,Time(ns)
randomdigit,grisu_exact,1,40.219000
randomdigit,grisu_exact,2,44.910000
randomdigit,grisu_exact,3,43.947000
randomdigit,grisu_exact,4,44.509000
randomdigit,grisu_exact,5,43.512000
randomdigit,grisu_exact,6,44.468000
randomdigit,grisu_exact,7,43.655000
randomdigit,grisu_exact,8,44.257000
randomdigit,grisu_exact,9,43.176000
randomdigit,grisu_exact,10,46.842000
randomdigit,grisu_exact,11,45.342000
randomdigit,grisu_exact,12,46.017000
randomdigit,grisu_exact,13,45.009000
randomdigit,grisu_exact,14,45.655000
randomdigit,grisu_exact,15,45.896000
randomdigit,grisu_exact,16,46.049000
randomdigit,grisu_exact,17,46.395000
randomdigit,doubleconv,1,89.947000
randomdigit,doubleconv,2,99.686000
randomdigit,doubleconv,3,105.522000
randomdigit,doubleconv,4,110.268000
randomdigit,doubleconv,5,114.572000
randomdigit,doubleconv,6,118.147000
randomdigit,doubleconv,7,122.142000
randomdigit,doubleconv,8,123.160000
randomdigit,doubleconv,9,124.031000
randomdigit,doubleconv,10,125.680000
randomdigit,doubleconv,11,126.394000
randomdigit,doubleconv,12,130.513000
randomdigit,doubleconv,13,130.660000
randomdigit,doubleconv,14,136.527000
randomdigit,doubleconv,15,137.955000
randomdigit,doubleconv,16,142.469000
randomdigit,doubleconv,17,150.156000
randomdigit,emyg,1,58.769000
randomdigit,emyg,2,64.156000
randomdigit,emyg,3,67.151000
randomdigit,emyg,4,69.824000
randomdigit,emyg,5,72.273000
randomdigit,emyg,6,74.825000
randomdigit,emyg,7,77.127000
randomdigit,emyg,8,79.233000
randomdigit,emyg,9,81.463000
randomdigit,emyg,10,83.843000
randomdigit,emyg,11,86.370000
randomdigit,emyg,12,88.642000
randomdigit,emyg,13,90.767000
randomdigit,emyg,14,92.578000
randomdigit,emyg,15,94.658000
randomdigit,emyg,16,97.001000
randomdigit,emyg,17,101.477000
randomdigit,floaxie,1,39.017000
randomdigit,floaxie,2,46.596000
randomdigit,floaxie,3,52.725000
randomdigit,floaxie,4,59.470000
randomdigit,floaxie,5,65.802000
randomdigit,floaxie,6,72.021000
randomdigit,floaxie,7,78.220000
randomdigit,floaxie,8,85.406000
randomdigit,floaxie,9,91.540000
randomdigit,floaxie,10,95.098000
randomdigit,floaxie,11,96.290000
randomdigit,floaxie,12,97.221000
randomdigit,floaxie,13,98.257000
randomdigit,floaxie,14,99.551000
randomdigit,floaxie,15,100.843000
randomdigit,floaxie,16,102.021000
randomdigit,floaxie,17,103.139000
randomdigit,fmt,1,131.111000
randomdigit,fmt,2,139.530000
randomdigit,fmt,3,142.121000
randomdigit,fmt,4,144.657000
randomdigit,fmt,5,147.114000
randomdigit,fmt,6,149.854000
randomdigit,fmt,7,152.165000
randomdigit,fmt,8,155.251000
randomdigit,fmt,9,157.261000
randomdigit,fmt,10,159.661000
randomdigit,fmt,11,161.707000
randomdigit,fmt,12,164.411000
randomdigit,fmt,13,166.378000
randomdigit,fmt,14,168.367000
randomdigit,fmt,15,170.976000
randomdigit,fmt,16,173.472000
randomdigit,fmt,17,176.543000
randomdigit,fpconv,1,111.199000
randomdigit,fpconv,2,120.337000
randomdigit,fpconv,3,128.602000
randomdigit,fpconv,4,134.941000
randomdigit,fpconv,5,141.702000
randomdigit,fpconv,6,146.859000
randomdigit,fpconv,7,151.143000
randomdigit,fpconv,8,154.757000
randomdigit,fpconv,9,156.676000
randomdigit,fpconv,10,158.083000
randomdigit,fpconv,11,160.331000
randomdigit,fpconv,12,162.341000
randomdigit,fpconv,13,164.234000
randomdigit,fpconv,14,165.926000
randomdigit,fpconv,15,168.074000
randomdigit,fpconv,16,171.873000
randomdigit,fpconv,17,177.244000
randomdigit,grisu2,1,110.920000
randomdigit,grisu2,2,118.526000
randomdigit,grisu2,3,117.206000
randomdigit,grisu2,4,117.446000
randomdigit,grisu2,5,119.861000
randomdigit,grisu2,6,121.825000
randomdigit,grisu2,7,123.768000
randomdigit,grisu2,8,126.130000
randomdigit,grisu2,9,129.208000
randomdigit,grisu2,10,131.169000
randomdigit,grisu2,11,134.449000
randomdigit,grisu2,12,136.940000
randomdigit,grisu2,13,139.034000
randomdigit,grisu2,14,140.988000
randomdigit,grisu2,15,143.541000
randomdigit,grisu2,16,146.716000
randomdigit,grisu2,17,152.607000
randomdigit,jkj,1,37.677000
randomdigit,jkj,2,40.110000
randomdigit,jkj,3,39.529000
randomdigit,jkj,4,39.745000
randomdigit,jkj,5,39.032000
randomdigit,jkj,6,39.438000
randomdigit,jkj,7,39.134000
randomdigit,jkj,8,38.975000
randomdigit,jkj,9,38.894000
randomdigit,jkj,10,41.235000
randomdigit,jkj,11,40.117000
randomdigit,jkj,12,40.435000
randomdigit,jkj,13,39.677000
randomdigit,jkj,14,40.249000
randomdigit,jkj,15,40.058000
randomdigit,jkj,16,40.014000
randomdigit,jkj,17,42.046000
randomdigit,milo,1,52.789000
randomdigit,milo,2,57.516000
randomdigit,milo,3,60.446000
randomdigit,milo,4,62.909000
randomdigit,milo,5,66.010000
randomdigit,milo,6,68.451000
randomdigit,milo,7,70.636000
randomdigit,milo,8,73.028000
randomdigit,milo,9,75.547000
randomdigit,milo,10,78.019000
randomdigit,milo,11,80.509000
randomdigit,milo,12,82.803000
randomdigit,milo,13,85.285000
randomdigit,milo,14,87.321000
randomdigit,milo,15,90.665000
randomdigit,milo,16,91.391000
randomdigit,milo,17,95.907000
randomdigit,null,1,1.191000
randomdigit,null,2,1.191000
randomdigit,null,3,1.191000
randomdigit,null,4,1.191000
randomdigit,null,5,1.191000
randomdigit,null,6,1.191000
randomdigit,null,7,1.191000
randomdigit,null,8,1.191000
randomdigit,null,9,1.191000
randomdigit,null,10,1.191000
randomdigit,null,11,1.191000
randomdigit,null,12,1.191000
randomdigit,null,13,1.191000
randomdigit,null,14,1.191000
randomdigit,null,15,1.191000
randomdigit,null,16,1.191000
randomdigit,null,17,1.191000
randomdigit,ryu,1,67.603000
randomdigit,ryu,2,68.684000
randomdigit,ryu,3,67.119000
randomdigit,ryu,4,65.065000
randomdigit,ryu,5,64.635000
randomdigit,ryu,6,61.492000
randomdigit,ryu,7,58.659000
randomdigit,ryu,8,56.926000
randomdigit,ryu,9,55.523000
randomdigit,ryu,10,55.577000
randomdigit,ryu,11,53.345000
randomdigit,ryu,12,51.722000
randomdigit,ryu,13,50.318000
randomdigit,ryu,14,48.656000
randomdigit,ryu,15,47.442000
randomdigit,ryu,16,45.568000
randomdigit,ryu,17,45.791000
randomdigit,to_chars,1,75.067000
randomdigit,to_chars,2,77.009000
randomdigit,to_chars,3,74.461000
randomdigit,to_chars,4,71.592000
randomdigit,to_chars,5,69.291000
randomdigit,to_chars,6,67.603000
randomdigit,to_chars,7,65.594000
randomdigit,to_chars,8,63.638000
randomdigit,to_chars,9,61.975000
randomdigit,to_chars,10,62.547000
randomdigit,to_chars,11,60.065000
randomdigit,to_chars,12,58.327000
randomdigit,to_chars,13,56.930000
randomdigit,to_chars,14,55.498000
randomdigit,to_chars,15,54.755000
randomdigit,to_chars,16,53.728000
randomdigit,to_chars,17,54.003000
</textarea>
</div>
<div class="row" id="downloadDD" style="display: none">
<div class="btn-group pull-right" >
    <button class="btn dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-picture"></span></button>
    <ul class="dropdown-menu">
        <li><a tabindex="-1" href="#" dltype="image/jpeg">JPEG</a></li>
        <li><a tabindex="-1" href="#" dltype="image/png">PNG</a></li>
        <li><a tabindex="-1" href="#" dltype="application/pdf">PDF</a></li>
        <li><a tabindex="-1" href="#" dltype="image/svg+xml">SVG</a></li>
    </ul>
</div>
</div>
<form method="post" action="http://export.highcharts.com/" id="imageGetForm">
    <input type="hidden" name="filename" id="imageFilename" value="" />
    <input type="hidden" name="type" id="imageGetFormTYPE" value="" />
    <input type="hidden" name="width" value="900" />
    <input type="hidden" name="svg" value="" id="imageGetFormSVG" />
</form>
</div>
</body>
</html>